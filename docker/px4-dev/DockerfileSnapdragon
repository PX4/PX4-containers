#
# PX4 build for the Snapdragon Eagle board.
#
# This contains the steps to build for the POSIX Linux part of the
# Snapdragon, as well as the part that runs on the DSP on QURT.
#

FROM ubuntu:xenial
MAINTAINER Julian Oes <julian@oes.ch>

RUN apt-get update \
    && apt-get -y --quiet --no-install-recommends install \
    binutils \
    file \
    git \
    make \
    cmake \
    unzip \
    xz-utils \
    wget \
    fakechroot \
    fakeroot \
    qemu-user-static \
    ca-certificates \
    ssh \
    python \
    python-empy \
    ninja-build \
    ccache \
    && apt-get -y autoremove \
    && apt-get clean autoclean \
    && rm -rf /var/lib/apt/lists/{apt,dpkg,cache,log}

RUN adduser --disabled-password --gecos '' --uid 1000 docker1000
USER docker1000

ENV TERM=xterm
ENV GIT_SSL_NO_VERIFY=true

ADD cross_toolchain/trimmedSDK.tgz \
    /home/docker1000/

ENV HEXAGON_SDK_ROOT="/home/docker1000/Qualcomm/Hexagon_SDK/3.0"
ENV HEXAGON_TOOLS_ROOT="/home/docker1000/Qualcomm/HEXAGON_Tools/7.2.12/Tools"
ENV HEXAGON_ARM_SYSROOT="/home/docker1000/Qualcomm/qrlinux_v4_sysroot/merged-rootfs"

ENV PATH="${HEXAGON_SDK_ROOT}/gcc-linaro-4.9-2014.11-x86_64_arm-linux-gnueabihf_linux/bin":$PATH

CMD ["/bin/bash"]
